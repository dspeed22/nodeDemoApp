/*! demo 16-02-2014 */
var rootUrl="https://localhost:3000";App=window.App=Ember.Application.createWithMixins(Bootstrap,{LOG_TRANSITIONS:!0}),App.ApplicationAdapter=DS.LSAdapter,App.Store=DS.Store.extend(),App.ChartHighchartComponent=Ember.Component.extend({tagName:"div",chartSeries:null,chartType:null,attributeBindings:["width","height"],width:"380px",height:"auto",chartTitle:"",yAxisTitle:"",didInsertElement:function(){{var a=($("#"+this.get("elementId")),this.get("chartSeries")),b={chart:{renderTo:this.get("elementId"),defaultSeriesType:this.get("chartType")},title:{text:this.get("chartTitle")},yAxis:{title:{text:this.get("yAxisTitle")}}},c=$.extend({},a,b);new Highcharts.Chart($.extend({},c))}}}),App.ChartConfig=Ember.Object.extend({chart:null,setChart:function(){var a={renderTo:this.get("renderToId"),defaultSeriesType:this.get("graphType")};this.set("chart",a)},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},series:[{name:"Test",data:[29.9,71.5,106.4,129.2,144,176,135.6,148.5,216.4,194.1,95.6,54.4]},{name:"Test2",data:[30.9,56.5,90.4,160.2,140,150,190.6,200.5,150.4,210.1,100.6,80.4]}],plotOptions:{series:{cursor:"pointer",allowPointSelect:!0,point:{events:{click:function(){App.graphController.switchTypes()}}}}},renderToId:null,graphType:null}),App.graphController=Ember.ArrayController.create({content:Ember.A([]),createGraph:function(a,b){var c=App.ChartConfig.create();c.set("renderToId",a),c.set("graphType",b),c.setChart(),this.pushObject(c)},renderCharts:function(){this.forEach(this.renderChart,this)},renderChart:function(a){new Highcharts.Chart($.extend({},a))},switchTypes:function(){this.forEach(function(a){var b="line"==a.graphType?"column":"line";a.set("graphType",b),a.setChart()}),this.renderCharts()}}),App.UsersController=Em.ArrayController.extend({sortProperties:["name"],sortAscending:!0,usersCount:function(){return this.get("model.length")}.property("@each")}),App.UsersCreateController=Em.ObjectController.extend({actions:{save:function(){var a=App.User.createRecord(this.get("model"));a.save(),this.transitionToRoute("users")}}}),App.ChartConfig=Ember.Object.extend({chart:null,setChart:function(){var a={renderTo:this.get("renderToId"),defaultSeriesType:this.get("graphType")};this.set("chart",a)},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},series:[{name:"Test",data:[29.9,71.5,106.4,129.2,144,176,135.6,148.5,216.4,194.1,95.6,54.4]},{name:"Test2",data:[30.9,56.5,90.4,160.2,140,150,190.6,200.5,150.4,210.1,100.6,80.4]}],plotOptions:{series:{cursor:"pointer",allowPointSelect:!0,point:{events:{click:function(){App.graphController.switchTypes()}}}}},renderToId:null,graphType:null}),App.ChartData=Ember.Object.extend({}),App.ChartData.reopenClass({LoadChartData:function(){var a=new Date,b=new Date;b.setDate(b.getDate()-7);var c={startDate:b,endDate:a},d=function(){var a=Highcharts.dateFormat("%A, %b %e, %Y",this.x),b=this.y,c="Clicked sales "+b+" on date "+a;Bootstrap.GNM.push("Sales Point Clicked",c,"info")};return new Ember.RSVP.Promise(function(a){Ember.$.ajax({type:"POST",url:"metrics/queryMetrics",data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(b){var c=[];$.each(b,function(){var a=this,b=[];b.push(new Date(a.date).getTime()),b.push(a.volume),c.push(b)}),c.sort(function(a,b){return a[0]-b[0]});var e={xAxis:{type:"datetime"},series:[{name:"Sales Volume",data:c}],plotOptions:{series:{cursor:"pointer",point:{events:{click:d}}}}},e=Ember.Object.create({modelOne:e,modelTwo:e});a(e)})})}}),App.User=DS.Model.extend({name:DS.attr("string"),active:DS.attr("boolean")}),App.IndexRoute=Ember.Route.extend({model:function(){return App.ChartData.LoadChartData()}}),App.Router.map(function(){this.route("activechart",{path:"/activechart"}),this.route("about"),this.resource("users",function(){this.route("create")})}),App.UserRoute=Em.Route.extend({model:function(a){return this.store.find("user",a.user_id)}}),App.UsersCreateRoute=Em.Route.extend({model:function(){return Em.Object.create({})},renderTemplate:function(){this.render("user.create",{controller:"usersCreate"})}}),App.UsersRoute=Em.Route.extend({model:function(){return this.store.find("user")}}),App.ActivechartView=Ember.View.extend({didInsertElement:function(){App.graphController.createGraph("graph1","line"),App.graphController.createGraph("graph2","column"),App.graphController.renderCharts()}});